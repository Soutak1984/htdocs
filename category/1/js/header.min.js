var searchResults=$("._search-results"),searchInput=$("._search-input"),messagesMain=$("#main-messages-holder"),inquiryBtn=$(".add-to-inquiry-btn"),timer=null;function watchSearch(){$("._search-submit").on("click",function(e){e.preventDefault(),e.stopPropagation();var t="/shop/product-search?keyword="+$("#searchValue").val()+"&";window.location.href=t}),$("#searchValue").on("keypress",function(e){if(13===e.which){e.preventDefault(),e.stopPropagation(),$(this).attr("disabled","disabled");var t="/shop/product-search?keyword="+$("#searchValue").val()+"&";window.location.href=t,$(this).removeAttr("disabled")}}),$("._search-box-input button").on("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).attr("disabled","disabled");var t="/shop/product-search?keyword="+$("#searchValue").val()+"&";window.location.href=t,$(this).removeAttr("disabled")})}function createMobileMenu(e){var t=$("._mega-menu-mobile");$(e).each(function(e,a){var s='<li class="_sub-menu-mobile-item"><a class="" href="'+a.slug+'">'+a.name+"</a></li>";$(t).append(s)})}function watchAddToInquiry(){$(".add-to-inquiry-btn").on("click",function(){var e={index:0,"product-name":$(this).attr("product-name"),part_no:$(this).attr("part_no"),brand:$(this).attr("brand")?$(this).attr("brand"):"",qty:inquiryBtn.val()?$("#_product-quantity").val():"1",link:$(this).attr("link"),is_china_market:!1,is_factory:!1,is_world_market:!1,target_price:"",description:"",unit:"",is_editable:"",data_sheet_name:"",data_sheet:""};$(),addToInquiryBtn(e),$(this).addClass("hidden"),$(this).parent().find("._show-inquiry-basket").removeClass("hidden")})}function addToInquiryBtn(e){for(var t=0,a=1,s=JSON.parse(localStorage.getItem("inquiry"))||[],n=0;n<s.length;n++)t=Math.max(s[n].index,t);t++,$.each(s,function(t,s){if(e.part_no===s.part_no)return a=0,setNotification(notif.warning,"this Part is exist in your Inquiry list",messagesMain,!1),!1}),1===a&&(e.index=t,s.push(e),localStorage.setItem("inquiry",JSON.stringify(s)),setNotification(notif.success,"Part "+e.part_no+" Successfully added to Your Inquiry List",messagesMain,!1),updateInquiryCount())}function updateInquiryCount(){inquiries=JSON.parse(localStorage.getItem("inquiry"))||[],inquiryCount=inquiries.length,inquiryCount>0?($("._first-show").hide(),$(".header-quote-btn").attr("href","/send-inquiry#send-form"),$("._second-show").show()):($("._first-show").show(),$(".header-quote-btn").attr("href","/send-inquiry#send-form"),$("._second-show").hide()),$(".header-quote-badge").html(inquiryCount)}function getRecommendation(e){e.keyword.length<2?$("._search-result-items-holder").hide():($("._search-result-items-holder").fadeIn(),$("._search-result-items-holder .fancy-spinner").addClass("show"),$.ajax({type:"POST",url:"/ajax/Main/ajaxSearch",data:e}).done(function(e){$("._search-result-items-holder .fancy-spinner").removeClass("show"),searchResults.addClass("show"),e.products.length>0?(searchResults.html(""),$.each(e.products,function(e,t){if(e<5){var a='<li><a class="search-item" href="'+t.url+'">\n            <span class="col item-name">'+t.name+"</span>\n<span>"+t.part_no+'</span><span><img src="'+t.img+'"></span>    </a></li>';searchResults.append(a)}}),e.products.length>5&&(searchResults.append('<button class="btn_1 text-center p-0 bg-none color-btn-dark _search-submit" type="submit" id="moreResult">More Result</button>'),watchSearch())):(searchResults.html(""),searchResults.append('<p class="text-center my-3 px-2 py-2" id="notFound">Sry No Result</p>'))}).fail(function(e){console.log(e)}))}function watchAddedToInquires(){$(".add-to-inquiry-btn").each(function(e,t){var a=$(t).attr("part_no");(JSON.parse(localStorage.getItem("inquiry"))||[]).forEach(function(e,s){a==e.part_no&&($(t).parent().find("._show-inquiry-basket").removeClass("hidden"),$(t).addClass("hidden"))})})}$(document).ready(function(){watchSearch(),$("body").on("click",function(e){e.stopPropagation(),$("._member-holder").removeClass("show"),$("._basket-holder ").fadeOut("show-basket"),$("._search-holder").fadeOut("show"),searchInput.val(""),searchResults.html(""),$("._search-result-items-holder").hide(),searchResults.removeClass("show")}),$("._search-btn").on("click",function(e){e.stopPropagation(),$("body").removeClass("overflow-hidden"),$(".bg-drop-show").removeClass("show"),$(".__mobile-menu").removeClass("show"),$("._member-holder").removeClass("show"),$("._basket-holder ").fadeOut("show-basket"),$("._search-holder").fadeToggle("show"),$("._search-input").focus()}),watchAddToInquiry(),watchAddedToInquires(),searchInput.on("input",function(e){var t=e.target.value;clearTimeout(timer),searchResults.html(""),searchResults.removeClass("show"),timer=setTimeout(function(){getRecommendation({keyword:t})},500)}).on("click",function(e){e.preventDefault(),e.stopPropagation()}),updateInquiryCount()});